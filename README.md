# 时间轴记事工具（跨设备同步版）

这是一个支持跨浏览器、跨设备数据同步的时间轴记事工具，无需自己搭建服务器，数据安全可靠。

## 功能特点

- ✅ **跨设备同步**：在任何浏览器、任何设备上添加的事件，都会自动同步到所有设备
- ✅ **无需编程**：按照说明配置后即可使用，无需编写任何代码
- ✅ **数据安全**：使用Firebase云存储，数据加密传输和存储
- ✅ **简单易用**：界面简洁清晰，操作直观
- ✅ **数据持久化**：关闭浏览器后数据不会丢失
- ✅ **支持修改删除**：可以随时修改或删除已添加的事件

## 准备工作：创建Firebase项目

### 1. 注册/登录Firebase账号

访问 [Firebase官网](https://firebase.google.com/)，点击右上角的"登录"，使用Google账号登录。

### 2. 创建新项目

1. 登录后，点击"开始使用"或"前往控制台"
2. 点击"添加项目"按钮
3. 输入项目名称（例如："时间轴记事工具"）
4. 取消勾选"启用Google Analytics"（可选，本项目不需要）
5. 点击"创建项目"
6. 等待项目创建完成，点击"继续"

### 3. 添加Web应用

1. 在项目控制台页面，点击左上角的"项目概览"
2. 点击"添加应用"按钮（网页图标）
3. 输入应用昵称（例如："时间轴工具"）
4. 不需要勾选"也将 Firebase Hosting 用于此应用"
5. 点击"注册应用"
6. 复制生成的配置代码（包含apiKey、authDomain等信息），稍后会用到
7. 点击"继续到控制台"

### 4. 启用实时数据库

1. 在左侧菜单中，点击"构建" → "实时数据库"
2. 点击"创建数据库"
3. 选择数据库位置（建议选择"asia-east1"或"asia-southeast1"等亚洲地区）
4. 点击"下一步"
5. 选择"测试模式"（⚠️ 注意：后续会设置安全规则）
6. 点击"启用"

### 5. 设置数据库安全规则

1. 在实时数据库页面，点击"规则"标签页
2. 将默认规则替换为以下内容：

```json
{
  "rules": {
    "users": {
      "$uid": {
        ".read": "auth != null && auth.uid == $uid",
        ".write": "auth != null && auth.uid == $uid"
      }
    }
  }
}
```

3. 点击"发布"

### 6. 启用匿名认证

1. 在左侧菜单中，点击"构建" → "Authentication"
2. 点击"开始"
3. 在"登录方法"标签页中，找到"匿名"并点击
4. 点击"启用"开关，然后点击"保存"

## 配置工具

### 1. 下载HTML文件

从仓库中下载 `timeline-sync.html` 文件到您的电脑。

### 2. 编辑配置信息

1. 使用文本编辑器（如记事本、VS Code等）打开 `timeline-sync.html` 文件
2. 找到以下代码段（大约在384行左右）：

```javascript
// Firebase配置 - 请替换为您自己的配置
const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
    databaseURL: "https://YOUR_PROJECT_ID-default-rtdb.firebaseio.com",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_PROJECT_ID.appspot.com",
    messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
    appId: "YOUR_APP_ID"
};
```

3. 将您在Firebase控制台中复制的配置信息替换掉上述代码中的占位符
4. 保存文件

## 使用方法

### 1. 打开工具

直接双击 `timeline-sync.html` 文件，或在浏览器中打开该文件。

### 2. 添加事件

1. 在"事件名称"输入框中输入事件名称
2. 点击"事件时间"选择框，选择事件发生的日期和时间
3. （可选）在"备注"输入框中填写备注信息
4. 点击"添加事件"按钮

### 3. 查看事件

添加的事件会按时间顺序（最新的在前面）显示在时间轴上。

### 4. 修改事件

1. 找到要修改的事件卡片
2. 点击"修改"按钮
3. 在编辑模式下修改事件信息
4. 点击"保存"按钮保存修改，或"取消"按钮放弃修改

### 5. 删除事件

1. 找到要删除的事件卡片
2. 点击"删除"按钮
3. 在弹出的确认对话框中点击"确定"

## 数据安全说明

1. **数据隔离**：每个用户的数据通过匿名认证的UID进行隔离，只有您能访问自己的数据
2. **加密传输**：数据传输使用HTTPS加密，确保传输过程安全
3. **云存储**：数据存储在Firebase云服务器上，有多重备份和冗余机制
4. **访问控制**：通过安全规则限制只有您自己可以访问和修改数据
5. **匿名认证**：无需提供个人信息，保护您的隐私

## 注意事项

1. **同一浏览器**：在同一浏览器中，即使关闭页面再重新打开，也会保持同一用户身份
2. **不同浏览器/设备**：在不同浏览器或设备上打开时，会生成不同的用户身份，数据不会自动同步
3. **保留用户ID**：如果需要在多个设备上访问同一数据，需要将用户ID固定（高级用法，详见进阶指南）
4. **Firebase免费额度**：Firebase提供免费额度，对于个人使用完全足够
5. **数据备份**：建议定期导出数据备份（Firebase控制台支持数据导出）

## 进阶指南：多设备访问同一数据

默认情况下，每个浏览器/设备会生成一个独立的匿名用户ID，导致数据无法在设备间共享。如果需要在多个设备上访问同一数据，可以：

1. 在一个设备上打开工具，按F12打开开发者工具
2. 切换到"控制台"标签页
3. 输入 `firebase.auth().currentUser.uid` 并回车，复制显示的UID
4. 在其他设备上，修改HTML文件，在初始化代码中添加：

```javascript
// 固定用户ID（替换为您自己的UID）
const fixedUid = "您复制的UID";
```

5. 然后修改认证代码，使用固定UID登录（需要更复杂的配置，建议仅对有技术基础的用户使用）

## 常见问题

### Q: 为什么事件没有同步到其他设备？
A: 请检查：
1. 每个设备是否使用了相同的Firebase配置
2. 网络连接是否正常
3. 设备是否使用了相同的用户身份

### Q: 数据会丢失吗？
A: Firebase有完善的数据备份机制，数据丢失的概率极低。建议定期导出数据备份。

### Q: 需要付费吗？
A: Firebase提供免费额度，对于个人使用完全足够。如果超出免费额度，才需要付费。

### Q: 如何导出数据？
A: 在Firebase控制台的实时数据库页面，点击"导出数据"按钮即可。

## 技术支持

如果遇到问题，可以：
1. 检查浏览器控制台是否有错误信息（按F12打开控制台）
2. 查看Firebase控制台的"监控" → "日志"页面
3. 确保所有配置步骤都已正确完成

## 更新日志

- v1.0.0：初始版本，支持跨设备同步
- v1.0.1：优化界面，添加状态提示
- v1.0.2：修复已知bug，提升稳定性

## 许可证

本项目采用MIT许可证，可自由使用和修改。

---

祝您使用愉快！🎉